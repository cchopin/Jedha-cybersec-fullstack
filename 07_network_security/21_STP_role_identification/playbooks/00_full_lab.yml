---
# =============================================================================
# Lab 21: STP Role Identification
# Playbook 00: Setup complet du lab
# =============================================================================
# Ce playbook execute tous les playbooks dans l'ordre:
# 1. Creer la topologie GNS3
# 2. Configurer les VLANs et Trunks
# 3. Configurer les IPs des VPCs
# 4. Afficher les informations STP
# =============================================================================

- name: Setup complet du lab STP
  hosts: localhost
  gather_facts: false

  tasks:
    - name: "PHASE 1: Creation de la topologie"
      debug:
        msg: "Creation des switches en triangle et VPCs..."

# -----------------------------------------------------------------------------
# Phase 1: Creer la topologie
# -----------------------------------------------------------------------------
- name: Creer la topologie
  import_playbook: 01_create_topology.yml

# -----------------------------------------------------------------------------
# Phase 2: Configurer VLANs et Trunks
# -----------------------------------------------------------------------------
- name: Configurer VLANs et Trunks
  import_playbook: 02_configure_vlans.yml

# -----------------------------------------------------------------------------
# Phase 3: Configurer les VPCs
# -----------------------------------------------------------------------------
- name: Configurer les VPCs
  import_playbook: 03_configure_vpcs.yml

# -----------------------------------------------------------------------------
# Phase 4: Verifier STP
# -----------------------------------------------------------------------------
- name: Verifier STP
  import_playbook: 04_verify_stp.yml
